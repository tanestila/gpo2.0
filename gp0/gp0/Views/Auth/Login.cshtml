@model gp0.ViewModels.LoginView
@{
    ViewData["Title"] = "Login";
}
<br />
<div>
    <form class="form-signin  form" asp-controller="Auth" asp-action="Login" method="post" role="form">
        <h1 class="h3 mb-3 font-weight-normal">Авторизация</h1>
        <output>@Model.error</output>
        <input name="email" type="email" id="inputEmail" asp-for="email" class="form-control" placeholder="Email address" required autoFocus />
        <output></output>
        <input name="password" type="password" id="inputPassword" asp-for="password" class="form-control" placeholder="Password" required />
        <br />
        <button class="btn btn-secondary btn-block" type="submit">Войти</button>
    </form>
    <hr />
    <div>
        <h1 class="h3 mb-3 font-weight-normal">Авторизация по сертификату</h1>
        <div id="panel1" class="tab-pane active">
            <p id="info_msg" name="CertificateTitle">Сертификат:</p>
            <div id="item_border" name="CertListBoxToHide">
                <select size="4" name="CertListBox" id="CertListBox" style="width:100%;resize:none;border:0;"></select>
            </div>
            <div id="boxdiv" style="display:none">
                <span id="errorarea">
                    У вас отсутствуют личные сертификаты. Вы можете получить сертификат от тестового УЦ, предварительно установив корневой сертификат тестового УЦ в доверенные.
                </span>
            </div>
            <div id="cert_info">
                <h3 id="cert_txt" style="visibility:hidden">Информация о сертификате</h3>
                <p class="info_field" id="subject"></p>
                <p class="info_field" id="issuer"></p>
                <p class="info_field" id="from"></p>
                <p class="info_field" id="till"></p>
                <p class="info_field" id="provname"></p>
                <p class="info_field" id="algorithm"></p>
                <p class="info_field" id="status"></p>
            </div>
            <br />
            <script language="javascript">
                var canPromise = !!window.Promise;
                if (canPromise) {
                    cadesplugin.then(function () {
                        Common_CheckForPlugIn();
                    },
                        function (error) {
                            //document.getElementById('PluginEnabledImg').setAttribute("src", "Img/red_dot.png");
                            //document.getElementById('PlugInEnabledTxt').innerHTML = error;
                        }
                    );
                } else {
                    window.addEventListener("message", function (event) {
                        if (event.data == "cadesplugin_loaded") {
                            CheckForPlugIn('isPlugInEnabled');
                        } else if (event.data == "cadesplugin_load_error") {
                            //document.getElementById('PluginEnabledImg').setAttribute("src", "Img/red_dot.png");
                            //document.getElementById('PlugInEnabledTxt').innerHTML = "Плагин не загружен";
                        }
                    },
                        false);
                    window.postMessage("cadesplugin_echo_request", "*");
                }
            </script>
            <button class="btn btn-secondary btn-block" onclick="AuthCertificate('CertListBox','Login')"> Войти</button>
            <p class="info_field" id="Success1"></p>
        </div>
    </div>
</div>